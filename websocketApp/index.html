<!DOCTYPE html>
<html lang=”en”>
<head>
    <title>Hackomation</title>


</head>
<body>
    <table>
    <caption>Sensors</caption>
    <thead>
        <tr>
        <th>Value</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Heading</td>
            <td id = "foo">0</td>
        </tr>
        <tr>
            <td>Pitch</td>
            <td id = "foo1">0</td>
        </tr>
        <tr>
            <td>roll:</td>
            <td id = "foo2"> 0</td>
        </tr>
    </tbody>
    </table>

    <script>
        foo = document.getElementById("foo");
        foo1 = document.getElementById("foo1");
        foo2 = document.getElementById("foo2");
        socket = new WebSocket("ws://localhost:8080");

        socket.addEventListener('open', function (event) {
            //console.log('Hello Server!');
        });

        socket.onmessage = function(event) {
            //console.log(`[message] Data received from server: ${event.data}`);
            var obj = JSON.parse(event.data);
            foo.innerHTML = obj.heading;
            foo1.innerHTML = obj.pitch;
            foo2.innerHTML = obj.roll;
        };

        socket.onclose = function(event) {
        if (event.wasClean) {
            console.log(`[close] Connection closed cleanly, code=${event.code} reason=${event.reason}`);
        } else {
            // e.g. server process killed or network down
            // event.code is usually 1006 in this case
            console.log('[close] Connection died');
        }
        };
        socket.onerror = function(error) {
        console.log(`[error] ${error.message}`);
        };

    </script>
</body>
</html>
